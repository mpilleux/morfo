<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Neuro 1</title>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="js/timer.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

  </head>
  <body>

    <div class="col-md-8 col-md-offset-2">
    
    <div class="col-md-8" id="estaciones">

      <div class="row" id="estacion1" class="estacion">
        <div class="col-md-12">
          <div class="mainContainer1 morfoObject">
            <img src="images/1-1.jpg" class="img-responsive">
          </div>
          <div class="mainContainer2 morfoObject">
            <img src="images/1-2.jpg" class="img-responsive">
          </div>
          <div class="mainContainer3 morfoObject">
            <img src="images/1-3.jpg" class="img-responsive">
          </div>
        </div>
        <div id="rojoAnswerContainer1" class="col-md-6 morfoAnswer">
          </br>
          <div class="form-group">
            <div class="input-group">
            <input id="respuestaRojo1" type="text" class="form-control" placeholder="Rojo" />
            <span class="input-group-addon">
              <button type="button" id="btn-rojo-1" class="btn btn-default" onClick="revisarRespuestaRojo();"></button>
            </span>
            </div>
            </br>
            <input type="text" id="lbl-rojo-1" class="form-control" value="" disabled/>
          </div>
        </div>
        <div id="blancoAnswerContainer1" class="col-md-6 morfoAnswer">
          </br>
          <div class="form-group">
            <div class="input-group">
            <input id="respuestaBlanco1" type="text" class="form-control" placeholder="Blanco" />
            <span class="input-group-addon">
              <button type="button" id="btn-blanco-1" class="btn btn-default" onClick="revisarRespuestaBlanco();"></button>
              </span>
            </div>
            </br>
            <input type="text" id="lbl-blanco-1" class="form-control" value="" disabled/>
            
          </div>
        </div>
      </div>

      <div class="row" id="estacion2" class="estacion">
        <div class="col-md-12">
          <div class="mainContainer1 morfoObject">
            <img src="images/2-1.jpg" class="img-responsive">
          </div>
          <div class="mainContainer2 morfoObject">
            <img src="images/2-2.jpg" class="img-responsive">
          </div>
          <div class="mainContainer3 morfoObject">
            <img src="images/2-3.jpg" class="img-responsive">
          </div>
        </div>
        <div id="rojoAnswerContainer2" class="col-md-6 morfoAnswer">
          </br>
          <div class="form-group">
            <div class="input-group">
            <input id="respuestaRojo2" type="text" class="form-control" placeholder="Rojo"/>
            <span class="input-group-addon">
              <button type="button" id="btn-rojo-2" class="btn btn-default" onClick="revisarRespuestaRojo();"></button>
              </span>
              </div>
              </br>
              <input type="text" id="lbl-rojo-2" value="" class="form-control" disabled/>
          </div>
        </div>
        <div id="blancoAnswerContainer2" class="col-md-6 morfoAnswer">
          </br>
          <div class="form-group">
            <div class="input-group">
            <input id="respuestaBlanco2" type="text" class="form-control" placeholder="Blanco" />
            <span class="input-group-addon">
              <button type="button" id="btn-blanco-2" class="btn btn-default" onClick="revisarRespuestaBlanco();"></button>
              </span>
              </div>
              </br>
              <input type="text" id="lbl-blanco-2" class="form-control" value="" disabled/>
            
          </div>
        </div>
      </div>

    </div>
    <div class="col-md-4">
      <div class="col-md-12">
        <label>Estaci&oacute;n:</label> <input type="text" id="estacionId" value="1" size="2" disabled/>/<input type="text" id="estacionMaxId" value="" size="2" disabled/>
      </div>
      <div class="col-md-12">
        </br>
        <label>Buenas:</label> <input type="text" id="buenasId" value="0" size="2" disabled/></br>
        <label>Malas:</label> <input type="text" id="malasId" value="0" size="2" disabled/>
      </div>  
      <div class="col-md-12 estacionNav">
        </br>
        <div class="btn-group btn-group-vertical" role="group">
          <button type="button" id="btn-nav-1" class="btn-nav btn btn-default btn-lg" onClick="showContainer(1);">1</button>
          <button type="button" id="btn-nav-2" class="btn-nav btn btn-default btn-lg" onClick="showContainer(2);">2</button>
          <button type="button" id="btn-nav-3" class="btn-nav btn btn-default btn-lg" onClick="showContainer(3);">3</button>
        </div>
      </div>  
      </hr>
      <div class="col-md-12">
        </br>
          <button type="button" id="btn-sgnt-estacion" class="btn btn-default btn-lg" onClick="nextEstacion();">Siguiente estaci&oacute;n</button>
      </div>
      <div class="col-md-4">
        </br>
        <div class="form-group form-group-lg">
          <input type="text" id="timer" class="form-control" value="60" size="2" disabled/>
        </div>  
      </div>  

    </div>

    </div>

    <script>

    	//alert(window.location.href.toString().split(window.location.host)[1]);
    	
    function createEstacion(num){
    	  var estacion = document.createElement('div');
    	  estacion.id = 'estacion'+num;
    	  estacion.className = 'row';
    	  estacion.className += ' estacion';
    	  document.getElementById('estaciones').appendChild(estacion);
    	  
    	  var imageContainer = document.createElement('div');
    	  imageContainer.className = 'col-md-12';
    	  estacion.appendChild(imageContainer);
    	  
    	  createImageDiv(imageContainer, num, 1);
    	  createImageDiv(imageContainer, num, 2);
    	  createImageDiv(imageContainer, num, 3);
    	  
    	  var answerContainerRojo = document.createElement('div');
    	  answerContainerRojo.id = 'rojoAnswerContainer'+num;
    	  answerContainerRojo.className = 'col-md-6 morfoAnswer';
    	  estacion.appendChild(answerContainerRojo);
    	  
    	  var br = document.createElement("br");    	  
    	  var formGroupRojo = document.createElement('div');
    	  formGroupRojo.className = "form-group";
    	  answerContainerRojo.appendChild(br);
    	  answerContainerRojo.appendChild(formGroupRojo);
    	  
    	  var inputGroupRojo = document.createElement('div');
    	  inputGroupRojo.className = "input-group";
    	  formGroupRojo.appendChild(inputGroupRojo);
      }
    
    function createImageDiv(imageContainer, estacionId, imageId){
    	var imageDiv = document.createElement('div');
    	imageDiv.className = 'mainContainer'+imageId+' morfoObject';
    	imageContainer.appendChild(imageDiv);
    	
    	var img = IEWIN? new Image() : document.createElement('img');
        img.src = 'images/'+estacionId+'-'+imageId;
        img.className = 'img-responsive';
        imageDiv.appendChild(img);
    }
    
      
      createEstacion(3);
    
      function showestacion(id){
        $(".estacion").hide();
        $(".morfoAnswer").hide();
        $(".morfoObject").hide();
        $("#estacion"+id+" .mainContainer1").show();
        $("#estacion"+id+" .morfoAnswer").show();
        setSelected(1);
        $("#estacionId").val(""+id);
      }

      function setSelected(id){
        $(".btn-nav").removeClass("active");
        $("#btn-nav-"+id).addClass("active");
      }

      function showContainer(containerId){
        $(".estacion").hide();
        $(".morfoObject").hide();
        $("#estacion"+currentestacion+" .mainContainer"+containerId).show();
        setSelected(containerId);
      }

      function nextEstacion(){
        revisarRespuestaRojo();
        revisarRespuestaBlanco();
        if( currentestacion < maxestacion ){
          currentestacion++;
          showestacion(currentestacion);
          tiempoPrueba = true;
          count = pruebaTime+1;
        }
        if( currentestacion >= maxestacion ){
          $('#btn-sgnt-estacion').addClass("active");
        }
      }

      function agregarBuena(){
        buenas++;
        $('#buenasId').val(buenas);
      }

      function agregarMala(){
        malas++;
        $('#malasId').val(malas);
      }

      function revisarRespuestaRojo(){
        if( $('#btn-rojo-'+currentestacion).hasClass('active') )
          return;

        var index = currentestacion - 1;
        var respUser = $("#respuestaRojo"+currentestacion).val()+"";
        var respReal = respuestasRojo[index]+"";
        $('#btn-rojo-'+currentestacion).addClass("active");

        if( respUser.toLowerCase() == respReal.toLowerCase() ){
          agregarBuena();
          $("#btn-rojo-"+currentestacion).removeClass('btn-default btn-danger').addClass('btn-success');
        }else{
          agregarMala();
          $("#btn-rojo-"+currentestacion).removeClass('btn-default btn-success').addClass('btn-danger');
        }

        $('#lbl-rojo-'+currentestacion).val(''+respReal);
      }

      function revisarRespuestaBlanco(){
        if( $('#btn-blanco-'+currentestacion).hasClass('active') )
          return;

        var index = currentestacion - 1;
        var respUser = $("#respuestaBlanco"+currentestacion).val()+"";
        var respReal = respuestasBlanco[index]+"";
        $('#btn-blanco-'+currentestacion).addClass("active");

        if( respUser.toLowerCase() == respReal.toLowerCase() ){
          agregarBuena();
          $("#btn-blanco-"+currentestacion).removeClass('btn-default btn-danger').addClass('btn-success');
        }else{
          agregarMala();
          $("#btn-blanco-"+currentestacion).removeClass('btn-default btn-success').addClass('btn-danger');
        }

        $('#lbl-blanco-'+currentestacion).val(''+respReal);
      }

      
      
      //--------------------cambiar---------------------
      var respuestasRojo = ["Fórnix", "Globo pálido"];
      var respuestasBlanco = ["Fórnix", "Putamen"];
      //------------------------------------------------
      
      var currentestacion = 1;
      var maxestacion = respuestasRojo.length;
      var buenas = 0;
      var malas = 0;
      var pruebaTime = 60;
      var extraTime = 6;
      var count = pruebaTime;
      var tiempoPrueba = true;
      var timer = $.timer(function() {
        count--;
        if( count >= 0 )
          $('#timer').val(count);
        if( count <= 0 ){
          if( tiempoPrueba ){
            tiempoPrueba = false;
            count = extraTime+1;
            revisarRespuestaRojo();
            revisarRespuestaBlanco();
          }else{
            nextEstacion();
          }
        }

      });
      timer.set({ time : 1000, autostart : true });
      $("#estacionMaxId").val(""+maxestacion);
      showestacion(currentestacion);
      
      
    </script>
  </body>
</html>